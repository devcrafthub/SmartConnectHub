<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Campus Dashboard | SmartConnectHub</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
:root{
  --bg:#05010a;
  --card:#0f0720;
  --purple:#b44cff;
  --glow:rgba(180,76,255,.7);
  --green:#4ade80;
  --red:#f87171;
  --yellow:#facc15;
}
*{box-sizing:border-box;font-family:'Segoe UI',sans-serif;}
body{margin:0;background:radial-gradient(circle at top,#160033,#000);color:#fff;}
nav{display:flex;justify-content:space-between;align-items:center;padding:18px 40px;background:#0b0418;box-shadow:0 0 20px var(--glow);}
.logo{font-size:22px;font-weight:bold;color:var(--purple);}
nav ul{list-style:none;display:flex;gap:25px;margin:0;}
nav ul li{cursor:pointer;color:#ccc;}
nav ul li:hover{color:var(--purple);}
.section{padding:40px;}
.section h2{color:var(--purple);margin-bottom:20px;text-align:center;}
.cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:30px;}
.card{background:linear-gradient(145deg,#12002a,#070010);padding:20px;border-radius:16px;box-shadow:0 0 20px rgba(180,76,255,.3);transition:.3s;}
.card:hover{transform:translateY(-8px);box-shadow:0 0 35px var(--glow);}
.card h3{margin:0 0 10px;color:var(--purple);}
.card p{color:#ccc;font-size:14px;}
table{width:100%;border-collapse:collapse;margin-bottom:30px;}
th,td{padding:10px;border-radius:8px;text-align:left;font-size:14px;}
th{background:#0b0418;color:var(--purple);}
td{background:#12002a;}
.badge{padding:4px 10px;border-radius:12px;font-size:12px;display:inline-block;}
.upcoming{color:#b44cff;background:rgba(180,76,255,.2);}
.live{color:#4ade80;background:rgba(74,222,128,.2);}
.closed{color:#f87171;background:rgba(248,113,113,.2);}
.active{color:#4ade80;background:rgba(74,222,128,.2);}
.inactive{color:#f87171;background:rgba(248,113,113,.2);}
button{padding:6px 12px;border:none;border-radius:10px;background:linear-gradient(135deg,#a855f7,#6d28d9);color:#fff;cursor:pointer;}
button:hover{transform:scale(1.05);}
#modal,#certModal{position:fixed;inset:0;background:rgba(0,0,0,.8);display:none;justify-content:center;align-items:center;z-index:200;}
#modal.active,#certModal.active{display:flex;}
.modal-box{background:#0f0720;padding:30px;border-radius:20px;width:380px;text-align:center;}
#qrcode img{margin:15px auto; width:128px; height:128px;}
.timeline{max-height:200px;overflow-y:auto;}
.timeline p{margin:5px 0;padding:5px;background:#12002a;border-radius:8px;font-size:13px;}
.footer{padding:20px;text-align:center;background:#0b0418;color:#aaa;}
.quick-actions button{margin-right:10px;margin-bottom:10px;}
.charts{display:flex;flex-wrap:wrap;gap:30px;justify-content:center;}
canvas{background:#0b0418;border-radius:16px;padding:15px;}
.notifications{position:fixed;top:20px;right:20px;width:280px;z-index:200;}
.notifications p{margin:5px 0;padding:10px;border-radius:12px;background:#12002a;font-size:13px;}
</style>
</head>
<body>

<!-- Navbar -->
<nav>
  <div class="logo">SmartConnectHub</div>
  <ul>
    <li>Dashboard</li>
    <li>Events</li>
    <li>Clubs</li>
    <li>Members</li>
    <li>Logout</li>
  </ul>
</nav>

<div class="notifications" id="notifications"></div>

<!-- Summary Cards / Stats -->
<section class="section">
  <h2>Summary</h2>
  <div class="cards" id="summaryCards"></div>
</section>

<!-- Quick Actions -->
<section class="section">
  <h2>Quick Actions</h2>
  <div class="quick-actions">
    <button onclick="createEvent()">Create Event</button>
    <button onclick="createClub()">Create Club</button>
    <button onclick="viewMembers()">View Members</button>
    <button onclick="approveRegistrations()">Approve Registrations</button>
    <button onclick="exportCSV()">Export Registrations CSV</button>
  </div>
</section>

<!-- Upcoming Events Table -->
<section class="section">
  <h2>Upcoming Events</h2>
  <table id="eventsTable">
    <thead>
      <tr><th>Event Name</th><th>Date</th><th>Status</th><th>Actions</th></tr>
    </thead>
    <tbody></tbody>
  </table>
</section>

<!-- Clubs Overview Table -->
<section class="section">
  <h2>Clubs Overview</h2>
  <table id="clubsTable">
    <thead>
      <tr><th>Club Name</th><th>Category</th><th>Status</th><th>Members</th><th>Actions</th></tr>
    </thead>
    <tbody></tbody>
  </table>
</section>

<!-- Recent Activities -->
<section class="section">
  <h2>Recent Activities</h2>
  <div class="timeline" id="activityTimeline"></div>
</section>

<!-- Charts -->
<section class="section">
  <h2>Analytics</h2>
  <div class="charts">
    <canvas id="eventChart" width="300" height="300"></canvas>
    <canvas id="membersChart" width="300" height="300"></canvas>
    <canvas id="participationChart" width="300" height="300"></canvas>
  </div>
</section>

<!-- Registration Modal -->
<div id="modal">
  <div class="modal-box">
    <h2>Registration Confirmed!</h2>
    <p id="regInfo"></p>
    <div id="qrcode"><img src="" id="customQR"></div>
    <button onclick="printReceipt()">Print Receipt</button>
    <button class="close" onclick="closeModal()">Close</button>
  </div>
</div>

<!-- Certificate Modal -->
<div id="certModal">
  <div class="modal-box">
    <h2>Certificate Preview</h2>
    <div id="certificateContent" style="margin-top:20px;"></div>
    <button onclick="printCertificate()">Print Certificate</button>
    <button onclick="closeCertModal()">Close</button>
  </div>
</div>

<div class="footer">¬© 2025 Smart Connect Hub Portal</div>

<script>
// Sample Data
let events=[
  {id:1,title:"AI & ML Workshop",date:"2025-12-20",status:"upcoming",participants:0},
  {id:2,title:"Hackathon",date:"2025-12-15",status:"live",participants:0},
  {id:3,title:"Cultural Fest",date:"2025-12-05",status:"closed",participants:0}
];
let clubs=[
  {id:1,title:"Coding Club",category:"Technical",status:"active",members:25},
  {id:2,title:"Music Club",category:"Cultural",status:"active",members:18},
  {id:3,title:"Drama Club",category:"Cultural",status:"inactive",members:12}
];
let registrations=JSON.parse(localStorage.getItem("registrations"))||[];
let activities=[];

// Notifications
function addNotification(msg){
  const container=document.getElementById('notifications');
  const p=document.createElement('p');
  p.textContent=msg;
  container.appendChild(p);
  setTimeout(()=>p.remove(),5000);
}

// Summary Cards
function renderSummary(){
  const upcoming=events.filter(e=>e.status==='upcoming').length;
  const live=events.filter(e=>e.status==='live').length;
  const closed=events.filter(e=>e.status==='closed').length;
  const activeClubs=clubs.filter(c=>c.status==='active').length;
  const inactiveClubs=clubs.filter(c=>c.status==='inactive').length;
  const members=clubs.reduce((acc,c)=>acc+c.members,0);
  const container=document.getElementById('summaryCards');
  container.innerHTML=`
    <div class="card">üéâ Upcoming Events<br>${upcoming}</div>
    <div class="card">üëÄ Live Events<br>${live}</div>
    <div class="card">‚ùå Closed Events<br>${closed}</div>
    <div class="card">üë• Active Clubs<br>${activeClubs}</div>
    <div class="card">üìõ Inactive Clubs<br>${inactiveClubs}</div>
    <div class="card">üìä Total Members<br>${members}</div>
  `;
}

// Render Events Table
function renderEvents(){
  const tbody=document.querySelector('#eventsTable tbody');
  tbody.innerHTML="";
  events.forEach(e=>{
    tbody.innerHTML+=`
      <tr>
        <td>${e.title}</td>
        <td>${e.date}</td>
        <td><span class="badge ${e.status}">${e.status}</span></td>
        <td>
          <button onclick="editEvent(${e.id})">Edit</button>
          ${(e.status==='upcoming'||e.status==='live')?`<button onclick="registerEvent(${e.id})">Register</button>`:''}
        </td>
      </tr>`;
  });
}

// Render Clubs Table
function renderClubs(){
  const tbody=document.querySelector('#clubsTable tbody');
  tbody.innerHTML="";
  clubs.forEach(c=>{
    tbody.innerHTML+=`
      <tr>
        <td>${c.title}</td>
        <td>${c.category}</td>
        <td><span class="badge ${c.status==='active'?'active':'inactive'}">${c.status}</span></td>
        <td>${c.members}</td>
        <td><button onclick="manageMembers(${c.id})">Manage</button></td>
      </tr>`;
  });
}

// Recent Activities
function addActivity(msg){
  activities.unshift({msg,date:new Date().toLocaleString()});
  if(activities.length>10) activities.pop();
  const timeline=document.getElementById('activityTimeline');
  timeline.innerHTML=activities.map(a=>`<p>[${a.date}] ${a.msg}</p>`).join('');
}

// Quick Actions
function createEvent(){
  const title=prompt("Enter Event Name");
  if(!title) return;
  const date=prompt("Enter Event Date (YYYY-MM-DD)");
  const newEvent={id:Date.now(),title,date,status:"upcoming",participants:0};
  events.push(newEvent);
  renderEvents();renderSummary();
  addActivity(`New Event Created: ${title}`);
  addNotification(`Event Created: ${title}`);
}
function createClub(){
  const title=prompt("Enter Club Name");
  if(!title) return;
  const category=prompt("Category");
  const members=parseInt(prompt("Number of Members"))||0;
  const newClub={id:Date.now(),title,category,status:"active",members};
  clubs.push(newClub);
  renderClubs();renderSummary();
  addActivity(`New Club Created: ${title}`);
  addNotification(`Club Created: ${title}`);
}
function viewMembers(){alert("View Members");}
function approveRegistrations(){alert("Approve Registrations");}
function manageMembers(id){alert("Manage Members for Club ID: "+id);}
function editEvent(id){alert("Edit Event ID: "+id);}

// Event Registration & QR + Certificate
let currentRegistration={};
const customQR="https://i.ibb.co/Y0xT5ZG/custom-qr.png"; // Your QR code
function registerEvent(eventId){
  const event=events.find(e=>e.id===eventId);
  const student=prompt("Enter Your Name to Register");
  if(!student) return;
  const regID='REG'+Date.now();
  currentRegistration={eventID:event.id,eventTitle:event.title,date:event.date,student,regID};
  registrations.push(currentRegistration);
  localStorage.setItem("registrations",JSON.stringify(registrations));
  event.participants++;
  document.getElementById('regInfo').innerHTML=`
    <strong>${student}</strong> registered for <strong>${event.title}</strong><br>
    Registration ID: ${regID}
    <br><button onclick='generateCertificate(currentRegistration)'>Generate Certificate</button>
  `;
  document.getElementById('customQR').src=customQR;
  addActivity(`Student Registered: ${student} for ${event.title}`);
  addNotification(`Registered: ${student} for ${event.title}`);
  document.getElementById('modal').classList.add('active');
}
function closeModal(){document.getElementById('modal').classList.remove('active');}

// Print receipt
function printReceipt(){
  const rec=`
    <html><body style="font-family:Segoe UI; text-align:center; color:#fff; background:#160033;">
      <h2>Event Registration Receipt</h2>
      <p>Student: <strong>${currentRegistration.student}</strong></p>
      <p>Event: <strong>${currentRegistration.eventTitle}</strong></p>
      <p>Date: <strong>${currentRegistration.date}</strong></p>
      <p>Registration ID: <strong>${currentRegistration.regID}</strong></p>
      <img src="${customQR}" width="128" height="128">
    </body></html>
  `;
  const w=window.open(""); w.document.write(rec); w.document.close(); w.print();
}

// Certificate Generation
function generateCertificate(registration){
  const content = `
    <div style="border:5px solid var(--purple);padding:20px;border-radius:15px;background:linear-gradient(145deg,#12002a,#070010);">
      <h1 style="color:var(--purple);">Certificate of Participation</h1>
      <p style="font-size:18px;">This is to certify that</p>
      <h2>${registration.student}</h2>
      <p>has successfully participated in</p>
      <h3>${registration.eventTitle}</h3>
      <p>on ${registration.date}</p>
      <p>Certificate ID: <strong>${registration.regID}</strong></p>
      <img src="${customQR}" width="100" height="100" alt="QR Code">
    </div>
  `;
  document.getElementById('certificateContent').innerHTML=content;
  document.getElementById('certModal').classList.add('active');
}
function closeCertModal(){document.getElementById('certModal').classList.remove('active');}
function printCertificate(){
  const w=window.open("");
  w.document.write(document.getElementById('certificateContent').innerHTML);
  w.document.close(); w.print();
}

// Export CSV
function exportCSV(){
  let csv="Student,Event,Date,RegID\n";
  registrations.forEach(r=>csv+=`${r.student},${r.eventTitle},${r.date},${r.regID}\n`);
  const blob=new Blob([csv],{type:"text/csv"});
  const url=URL.createObjectURL(blob);
  const a=document.createElement('a'); a.href=url; a.download="registrations.csv"; a.click();
}

// Charts
function renderCharts(){
  const ctxEvent=document.getElementById('eventChart').getContext('2d');
  new Chart(ctxEvent,{type:'pie',data:{labels:['Upcoming','Live','Closed'],datasets:[{data:[events.filter(e=>e.status==='upcoming').length,events.filter(e=>e.status==='live').length,events.filter(e=>e.status==='closed').length],backgroundColor:['#b44cff','#4ade80','#f87171']}]},options:{responsive:true}});
  
  const ctxMembers=document.getElementById('membersChart').getContext('2d');
  new Chart(ctxMembers,{type:'bar',data:{labels:clubs.map(c=>c.title),datasets:[{label:'Members',data:clubs.map(c=>c.members),backgroundColor:'#b44cff'}]},options:{responsive:true}});
  
  const ctxPart=document.getElementById('participationChart').getContext('2d');
  new Chart(ctxPart,{type:'line',data:{labels:events.map(e=>e.title),datasets:[{label:'Participants',data:events.map(e=>e.participants),borderColor:'#4ade80',fill:false}]},options:{responsive:true}});
}

// Notifications for today/inactive
function checkNotifications(){
  const today=new Date().toISOString().split("T")[0];
  events.forEach(e=>{if(e.date===today)addNotification(`Event Today: ${e.title}`);});
  clubs.forEach(c=>{if(c.status==='inactive')addNotification(`Inactive Club: ${c.title}`);});
}

// Initial Render
renderSummary(); renderEvents(); renderClubs(); renderCharts(); addActivity("Dashboard Loaded"); checkNotifications();
</script>
</body>
</html>